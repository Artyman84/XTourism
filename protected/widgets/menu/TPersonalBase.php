<?php/** * Created by PhpStorm. * User: Arty * Date: 10.10.2017 * Time: 18:27 */class TPersonalBase extends TSiteMenu {    /**     * @var ArShopUsersPackages     */    protected $package;    /**     * @var int     */    private $tour_request_count;    /**     * Init     */    public function init(){        $this->package = ArShopUsersPackages::model()->findByAttributes(['user_id' => $this->userId]);        parent::init();    }    /**     * @return int     */    public function getTourRequestCount() {        if( $this->tour_request_count === null ) {            $this->tour_request_count = Yii::app()->db->createCommand()                ->select('COUNT(id)')                ->from('{{clients_tours_requests}}')                ->where('agent_id = :user_id AND state = 2', [':user_id' => $this->userId])                ->queryScalar();        }        return $this->tour_request_count;    }}