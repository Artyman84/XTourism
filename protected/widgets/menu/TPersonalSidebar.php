<?php/** * Created by PhpStorm. * User: Arty * Date: 04.10.2017 * Time: 17:38 */class TPersonalSidebar extends TPersonalBase {    /**     * Runs Sidebar     */    public function run() {        if($this->package && $this->package->isValid()) {?>            <ul class="nav nav-sidebar" role="navigation-sidebar-menu">                <? if( $this->package->hasProduct(ArShopProductsTypes::PDT_TOUR_SHOWCASE) ) {?>                    <li <?php echo ($this->checkMenuItem(self::T_FMI_TOUR_SHOWCASE) ? 'class="active"' : '')?>>                        <a href="<?=Yii::app()->createUrl('userTourShowcase/index')?>"><span class="glyphicon glyphicon-th"></span> Витрина туров</a>                    </li>                <?php } ?>                <? if( $this->package->hasProduct(ArShopProductsTypes::PDT_SEARCHER) ) {?>                    <li <?php echo ($this->checkMenuItem(self::T_FMI_TOUR_SEARCH) ? 'class="active"' : '')?>>                        <a href="<?=Yii::app()->createUrl('userSearcher/index')?>"><span class="glyphicon glyphicon-search"></span> Поисковик туров</a>                    </li>                <?php } ?>                <? if( $this->package->hasProduct(ArShopProductsTypes::PDT_LP_BUILDER) ) {?>                    <li <?php echo ($this->checkMenuItem(self::T_FMI_LP_BUILDER) ? 'class="active"' : '')?>>                        <a href="<?=Yii::app()->createUrl('userConstruct/index')?>"><span class="fa fa-magic i-margin"></span> Конструктор лендингов</a>                    </li>                <?php } ?>            </ul>            <? if( $this->package->hasProduct(ArShopProductsTypes::PDT_TOUR_SHOWCASE) || $this->package->hasProduct(ArShopProductsTypes::PDT_SEARCHER) ) { ?>                <? $count = $this->getTourRequestCount();?>                <ul class="nav nav-sidebar" role="navigation-sidebar-menu">                    <li class="t-menu-tours-requests  <?php echo ($this->checkMenuItem(self::T_FMI_CLIENTS_TOUR_REQUESTS) ? 'active' : '')?>">                        <a tabindex="-2" href="<?= Yii::app()->createUrl('ToursRequests') ?>" style="padding-right: 35px;"><span class="flaticon-phone-auricular-and-a-clock" style="position: relative; top: 1px;"></span> Заявки на туры                            <? if($count) {?>                                <div class="text-nowrap tour-request-count" style="font-size: 12px; position: absolute; top: 10px; left: 145px;">                                    <span class="fa fa-plus" style="font-size: 10px;"></span>                                    <strong><?=$count?></strong>                                </div>                            <? } ?>                        </a>                    </li>                </ul>            <?php } ?>        <?php } ?>        <ul class="nav nav-sidebar" role="navigation-sidebar-menu">            <li <?=$this->checkMenuItem(self::T_FMI_PROFILE) ? 'class="active"' : ''?>>                <a tabindex="-3" href="<?=Yii::app()->createUrl('Users/profile')?>">                    <span class="glyphicon glyphicon-user i-margin"></span> Профайл                </a>            </li>            <li class="text-primary <?=($this->checkMenuItem(self::T_FMI_USER_PACKAGE) ? ' active' : '')?>">                <a tabindex="-3" href="<?=Yii::app()->createUrl('Packages/userPackage')?>">                    <span class="flaticon-delivery-package-opened"></span> Пакет                </a>            </li>            <li <?php echo ($this->checkMenuItem(self::T_FMI_CONTACTS) ? 'class="active"' : '') ?>>                <a tabindex="-2" href="<?php echo Yii::app()->createUrl('Welcome/support')?>">                    <span class="fa fa-support"></span>&nbsp;Техподдержка                </a>            </li>        </ul><?$js = <<<JS    $('ul[role="navigation-sidebar-menu"] a[class!="dropdown-toggle"]').click(function(){        $.showFade();    });JS;        Yii::app()->clientScript->registerScript( 'nav-sidebar-menu', $js, CClientScript::POS_READY );    }}